## 算法实现及优化
算法细节参考了[SM3标准文件](https://oscca.gov.cn/sca/xxgk/2010-12/17/1002389/files/302a3ada057c4a73830536d03e683110.pdf)的指导，此处省略。
- MySM3.cpp为最基础的SM3算法，以字节为单位处理数据
- uint32.cpp的优化思想是基于对SM3结构的观察：SM3算法以32bit为最小处理单位，那么可以利用uint32直接进行计算节约计算量，降低大量函数调用的栈开销。
- 在此基础上，对最耗时间的消息扩展和压缩函数进行4次循环展开，减少分支预测失败和循环计数器开销
### 性能测试结果
- uint32Benchmark.cpp与MySM3Benchmark.cpp分别给出了上述两版代码的执行效率，运行结果如下图所示：

| | |
| :-: | :-: |
| ![MySM3.png](https://github.com/Maoyu37/Creative_Project_homework/blob/main/Project4_SM3SpeedUP/MySM3.png) | ![uint32.png](https://github.com/Maoyu37/Creative_Project_homework/blob/main/Project4_SM3SpeedUP/uint32.png) |
| 原始实现的运行截图 | unsigned int 32实现的性能截图 |
| 7.051ms | 0.775ms |
| 原始实现的轮耗时 | 新实现的轮耗时 |
## 长度拓展攻击
### 攻击模型描述
    攻击者只知道消息Input以及其哈希值Hash，通过以下方法，他可以在不直接向哈希寓言机询问Input2的前提下构造一个长度拓展的Hash伪造(Input2,Hash2)
### 1、生成一个原像-哈希对
    利用上述的标准输入输出样例为例，首先用512bit输入生成其hash值：
    Input:  61626364616263646162636461626364616263646162636461626364616263646162636461626364616263646162636461626364616263646162636461626364
    Pad:    80000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200
    Hash:   DEBE9FF92275B8A138604889C18E5A4D6FDB70E5387E5765293DCBA39C0C5732
### 2、任意选取一个消息M，生成攻击原像
    M:不妨取123456
    Input2: 6162636461626364616263646162636461626364616263646162636461626364616263646162636461626364616263646162636461626364616263646162636480000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200123456
    Hash2:  0EC84E837904227C18196A7E19D21169B65A947A1F4C038C072D22561DFA5EBD
    我们的目的是，在询问寓言机的信息中不含有Input2的前提下给出Hash2
### 3、通过重设IV向量生成新消息的hash
    IV:     DEBE9FF92275B8A138604889C18E5A4D6FDB70E5387E5765293DCBA39C0C5732
    Input3: 123456
    非法pad:12345680000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000418
    Hash3:  0EC84E837904227C18196A7E19D21169B65A947A1F4C038C072D22561DFA5EBD
    LengthAttendAttack1.cpp给出了生成Hash3的代码
    注意到Hash2=Hash3，这是一个合法伪造。